
PLAY [all] *********************************************************************

TASK [Gathering Facts] *********************************************************
ok: [localhost]

TASK [roles/_vars : include_tasks] *********************************************
included: /home/vale/Projects/ansible-rosa/roles/_vars/tasks/validate.yml for localhost

TASK [roles/_vars : get aws caller info for accountid] *************************
ok: [localhost]

TASK [roles/_vars : set_fact] **************************************************
ok: [localhost]

TASK [roles/network_math : include_tasks] **************************************
included: /home/vale/Projects/ansible-rosa/roles/network_math/tasks/rosa_vpc.yml for localhost

TASK [roles/network_math : set_fact] *******************************************
ok: [localhost]

TASK [roles/network_math : set_fact] *******************************************
ok: [localhost]

TASK [roles/network_math : set_fact] *******************************************
ok: [localhost]

TASK [roles/vpc_create : create a vpc] *****************************************
ok: [localhost]

TASK [roles/vpc_create : set_fact] *********************************************
ok: [localhost]

TASK [roles/vpc_create : create private subnets] *******************************
ok: [localhost] => (item={'cidr': '10.0.12.0/22', 'az': 'us-east-2a', 'resource_tags': {'Name': 'ansible-rosa-v1-private'}})
ok: [localhost] => (item={'cidr': '10.0.16.0/22', 'az': 'us-east-2b', 'resource_tags': {'Name': 'ansible-rosa-v1-private'}})
ok: [localhost] => (item={'cidr': '10.0.20.0/22', 'az': 'us-east-2c', 'resource_tags': {'Name': 'ansible-rosa-v1-private'}})

TASK [roles/vpc_create : create public subnets] ********************************
ok: [localhost] => (item={'cidr': '10.0.0.0/22', 'az': 'us-east-2a', 'resource_tags': {'Name': 'ansible-rosa-v1-public'}})
ok: [localhost] => (item={'cidr': '10.0.4.0/22', 'az': 'us-east-2b', 'resource_tags': {'Name': 'ansible-rosa-v1-public'}})
ok: [localhost] => (item={'cidr': '10.0.8.0/22', 'az': 'us-east-2c', 'resource_tags': {'Name': 'ansible-rosa-v1-public'}})

TASK [roles/vpc_create : figure out list of subnets] ***************************
ok: [localhost]

TASK [roles/vpc_create : create internet gateway] ******************************
ok: [localhost]

TASK [roles/vpc_create : create public subnet route table] *********************
ok: [localhost]

TASK [roles/vpc_create : include_tasks] ****************************************
included: /home/vale/Projects/ansible-rosa/roles/vpc_create/tasks/nat_gateway_routes.yml for localhost => (item={'changed': False, 'subnet': {'availability_zone': 'us-east-2a', 'availability_zone_id': 'use2-az1', 'available_ip_address_count': 1017, 'cidr_block': '10.0.0.0/22', 'default_for_az': False, 'map_public_ip_on_launch': False, 'map_customer_owned_ip_on_launch': False, 'state': 'available', 'vpc_id': 'vpc-00277005cb55fcea0', 'owner_id': '066188790342', 'assign_ipv6_address_on_creation': False, 'ipv6_cidr_block_association_set': [], 'tags': {'Name': 'ansible-rosa-v1-public'}, 'subnet_arn': 'arn:aws:ec2:us-east-2:066188790342:subnet/subnet-0aed07a0d1cf25e93', 'enable_dns64': False, 'ipv6_native': False, 'private_dns_name_options_on_launch': {'hostname_type': 'ip-name', 'enable_resource_name_dns_a_record': False, 'enable_resource_name_dns_aaaa_record': False}, 'id': 'subnet-0aed07a0d1cf25e93', 'ipv6_cidr_block': '', 'ipv6_association_id': ''}, 'invocation': {'module_args': {'region': 'us-east-2', 'vpc_id': 'vpc-00277005cb55fcea0', 'cidr': '10.0.0.0/22', 'az': 'us-east-2a', 'purge_tags': False, 'resource_tags': {'Name': 'ansible-rosa-v1-public'}, 'tags': {'Name': 'ansible-rosa-v1-public'}, 'validate_certs': True, 'debug_botocore_endpoint_logs': False, 'ipv6_cidr': '', 'outpost_arn': '', 'state': 'present', 'map_public': False, 'assign_instances_ipv6': False, 'wait': True, 'wait_timeout': 300, 'access_key': None, 'secret_key': None, 'session_token': None, 'profile': None, 'endpoint_url': None, 'aws_ca_bundle': None, 'aws_config': None}}, 'failed': False, 'item': {'cidr': '10.0.0.0/22', 'az': 'us-east-2a', 'resource_tags': {'Name': 'ansible-rosa-v1-public'}}, 'ansible_loop_var': 'item'})
included: /home/vale/Projects/ansible-rosa/roles/vpc_create/tasks/nat_gateway_routes.yml for localhost => (item={'changed': False, 'subnet': {'availability_zone': 'us-east-2b', 'availability_zone_id': 'use2-az2', 'available_ip_address_count': 1018, 'cidr_block': '10.0.4.0/22', 'default_for_az': False, 'map_public_ip_on_launch': False, 'map_customer_owned_ip_on_launch': False, 'state': 'available', 'vpc_id': 'vpc-00277005cb55fcea0', 'owner_id': '066188790342', 'assign_ipv6_address_on_creation': False, 'ipv6_cidr_block_association_set': [], 'tags': {'Name': 'ansible-rosa-v1-public'}, 'subnet_arn': 'arn:aws:ec2:us-east-2:066188790342:subnet/subnet-0de74ac6701e3c1d0', 'enable_dns64': False, 'ipv6_native': False, 'private_dns_name_options_on_launch': {'hostname_type': 'ip-name', 'enable_resource_name_dns_a_record': False, 'enable_resource_name_dns_aaaa_record': False}, 'id': 'subnet-0de74ac6701e3c1d0', 'ipv6_cidr_block': '', 'ipv6_association_id': ''}, 'invocation': {'module_args': {'region': 'us-east-2', 'vpc_id': 'vpc-00277005cb55fcea0', 'cidr': '10.0.4.0/22', 'az': 'us-east-2b', 'purge_tags': False, 'resource_tags': {'Name': 'ansible-rosa-v1-public'}, 'tags': {'Name': 'ansible-rosa-v1-public'}, 'validate_certs': True, 'debug_botocore_endpoint_logs': False, 'ipv6_cidr': '', 'outpost_arn': '', 'state': 'present', 'map_public': False, 'assign_instances_ipv6': False, 'wait': True, 'wait_timeout': 300, 'access_key': None, 'secret_key': None, 'session_token': None, 'profile': None, 'endpoint_url': None, 'aws_ca_bundle': None, 'aws_config': None}}, 'failed': False, 'item': {'cidr': '10.0.4.0/22', 'az': 'us-east-2b', 'resource_tags': {'Name': 'ansible-rosa-v1-public'}}, 'ansible_loop_var': 'item'})
included: /home/vale/Projects/ansible-rosa/roles/vpc_create/tasks/nat_gateway_routes.yml for localhost => (item={'changed': False, 'subnet': {'availability_zone': 'us-east-2c', 'availability_zone_id': 'use2-az3', 'available_ip_address_count': 1018, 'cidr_block': '10.0.8.0/22', 'default_for_az': False, 'map_public_ip_on_launch': False, 'map_customer_owned_ip_on_launch': False, 'state': 'available', 'vpc_id': 'vpc-00277005cb55fcea0', 'owner_id': '066188790342', 'assign_ipv6_address_on_creation': False, 'ipv6_cidr_block_association_set': [], 'tags': {'Name': 'ansible-rosa-v1-public'}, 'subnet_arn': 'arn:aws:ec2:us-east-2:066188790342:subnet/subnet-0b0ad3a6a66863b69', 'enable_dns64': False, 'ipv6_native': False, 'private_dns_name_options_on_launch': {'hostname_type': 'ip-name', 'enable_resource_name_dns_a_record': False, 'enable_resource_name_dns_aaaa_record': False}, 'id': 'subnet-0b0ad3a6a66863b69', 'ipv6_cidr_block': '', 'ipv6_association_id': ''}, 'invocation': {'module_args': {'region': 'us-east-2', 'vpc_id': 'vpc-00277005cb55fcea0', 'cidr': '10.0.8.0/22', 'az': 'us-east-2c', 'purge_tags': False, 'resource_tags': {'Name': 'ansible-rosa-v1-public'}, 'tags': {'Name': 'ansible-rosa-v1-public'}, 'validate_certs': True, 'debug_botocore_endpoint_logs': False, 'ipv6_cidr': '', 'outpost_arn': '', 'state': 'present', 'map_public': False, 'assign_instances_ipv6': False, 'wait': True, 'wait_timeout': 300, 'access_key': None, 'secret_key': None, 'session_token': None, 'profile': None, 'endpoint_url': None, 'aws_ca_bundle': None, 'aws_config': None}}, 'failed': False, 'item': {'cidr': '10.0.8.0/22', 'az': 'us-east-2c', 'resource_tags': {'Name': 'ansible-rosa-v1-public'}}, 'ansible_loop_var': 'item'})

TASK [roles/vpc_create : create nat gateway per public subnet (az)] ************
ok: [localhost]

TASK [roles/vpc_create : create private subnet route table] ********************
ok: [localhost] => (item={'changed': False, 'subnet': {'availability_zone': 'us-east-2a', 'availability_zone_id': 'use2-az1', 'available_ip_address_count': 1019, 'cidr_block': '10.0.12.0/22', 'default_for_az': False, 'map_public_ip_on_launch': False, 'map_customer_owned_ip_on_launch': False, 'state': 'available', 'vpc_id': 'vpc-00277005cb55fcea0', 'owner_id': '066188790342', 'assign_ipv6_address_on_creation': False, 'ipv6_cidr_block_association_set': [], 'tags': {'Name': 'ansible-rosa-v1-private'}, 'subnet_arn': 'arn:aws:ec2:us-east-2:066188790342:subnet/subnet-085ee901048dbf079', 'enable_dns64': False, 'ipv6_native': False, 'private_dns_name_options_on_launch': {'hostname_type': 'ip-name', 'enable_resource_name_dns_a_record': False, 'enable_resource_name_dns_aaaa_record': False}, 'id': 'subnet-085ee901048dbf079', 'ipv6_cidr_block': '', 'ipv6_association_id': ''}, 'invocation': {'module_args': {'region': 'us-east-2', 'vpc_id': 'vpc-00277005cb55fcea0', 'cidr': '10.0.12.0/22', 'az': 'us-east-2a', 'purge_tags': False, 'resource_tags': {'Name': 'ansible-rosa-v1-private'}, 'tags': {'Name': 'ansible-rosa-v1-private'}, 'validate_certs': True, 'debug_botocore_endpoint_logs': False, 'ipv6_cidr': '', 'outpost_arn': '', 'state': 'present', 'map_public': False, 'assign_instances_ipv6': False, 'wait': True, 'wait_timeout': 300, 'access_key': None, 'secret_key': None, 'session_token': None, 'profile': None, 'endpoint_url': None, 'aws_ca_bundle': None, 'aws_config': None}}, 'failed': False, 'item': {'cidr': '10.0.12.0/22', 'az': 'us-east-2a', 'resource_tags': {'Name': 'ansible-rosa-v1-private'}}, 'ansible_loop_var': 'item'})

TASK [roles/vpc_create : create nat gateway per public subnet (az)] ************
ok: [localhost]

TASK [roles/vpc_create : create private subnet route table] ********************
ok: [localhost] => (item={'changed': False, 'subnet': {'availability_zone': 'us-east-2b', 'availability_zone_id': 'use2-az2', 'available_ip_address_count': 1019, 'cidr_block': '10.0.16.0/22', 'default_for_az': False, 'map_public_ip_on_launch': False, 'map_customer_owned_ip_on_launch': False, 'state': 'available', 'vpc_id': 'vpc-00277005cb55fcea0', 'owner_id': '066188790342', 'assign_ipv6_address_on_creation': False, 'ipv6_cidr_block_association_set': [], 'tags': {'Name': 'ansible-rosa-v1-private'}, 'subnet_arn': 'arn:aws:ec2:us-east-2:066188790342:subnet/subnet-0a6e5b1123448173a', 'enable_dns64': False, 'ipv6_native': False, 'private_dns_name_options_on_launch': {'hostname_type': 'ip-name', 'enable_resource_name_dns_a_record': False, 'enable_resource_name_dns_aaaa_record': False}, 'id': 'subnet-0a6e5b1123448173a', 'ipv6_cidr_block': '', 'ipv6_association_id': ''}, 'invocation': {'module_args': {'region': 'us-east-2', 'vpc_id': 'vpc-00277005cb55fcea0', 'cidr': '10.0.16.0/22', 'az': 'us-east-2b', 'purge_tags': False, 'resource_tags': {'Name': 'ansible-rosa-v1-private'}, 'tags': {'Name': 'ansible-rosa-v1-private'}, 'validate_certs': True, 'debug_botocore_endpoint_logs': False, 'ipv6_cidr': '', 'outpost_arn': '', 'state': 'present', 'map_public': False, 'assign_instances_ipv6': False, 'wait': True, 'wait_timeout': 300, 'access_key': None, 'secret_key': None, 'session_token': None, 'profile': None, 'endpoint_url': None, 'aws_ca_bundle': None, 'aws_config': None}}, 'failed': False, 'item': {'cidr': '10.0.16.0/22', 'az': 'us-east-2b', 'resource_tags': {'Name': 'ansible-rosa-v1-private'}}, 'ansible_loop_var': 'item'})

TASK [roles/vpc_create : create nat gateway per public subnet (az)] ************
ok: [localhost]

TASK [roles/vpc_create : create private subnet route table] ********************
ok: [localhost] => (item={'changed': False, 'subnet': {'availability_zone': 'us-east-2c', 'availability_zone_id': 'use2-az3', 'available_ip_address_count': 1019, 'cidr_block': '10.0.20.0/22', 'default_for_az': False, 'map_public_ip_on_launch': False, 'map_customer_owned_ip_on_launch': False, 'state': 'available', 'vpc_id': 'vpc-00277005cb55fcea0', 'owner_id': '066188790342', 'assign_ipv6_address_on_creation': False, 'ipv6_cidr_block_association_set': [], 'tags': {'Name': 'ansible-rosa-v1-private'}, 'subnet_arn': 'arn:aws:ec2:us-east-2:066188790342:subnet/subnet-05482346436ff073c', 'enable_dns64': False, 'ipv6_native': False, 'private_dns_name_options_on_launch': {'hostname_type': 'ip-name', 'enable_resource_name_dns_a_record': False, 'enable_resource_name_dns_aaaa_record': False}, 'id': 'subnet-05482346436ff073c', 'ipv6_cidr_block': '', 'ipv6_association_id': ''}, 'invocation': {'module_args': {'region': 'us-east-2', 'vpc_id': 'vpc-00277005cb55fcea0', 'cidr': '10.0.20.0/22', 'az': 'us-east-2c', 'purge_tags': False, 'resource_tags': {'Name': 'ansible-rosa-v1-private'}, 'tags': {'Name': 'ansible-rosa-v1-private'}, 'validate_certs': True, 'debug_botocore_endpoint_logs': False, 'ipv6_cidr': '', 'outpost_arn': '', 'state': 'present', 'map_public': False, 'assign_instances_ipv6': False, 'wait': True, 'wait_timeout': 300, 'access_key': None, 'secret_key': None, 'session_token': None, 'profile': None, 'endpoint_url': None, 'aws_ca_bundle': None, 'aws_config': None}}, 'failed': False, 'item': {'cidr': '10.0.20.0/22', 'az': 'us-east-2c', 'resource_tags': {'Name': 'ansible-rosa-v1-private'}}, 'ansible_loop_var': 'item'})

TASK [roles/jumphost_create : make sure we have a subnet to use no egress vpc] ***
ok: [localhost]

TASK [roles/jumphost_create : create ssh key pair] *****************************
ok: [localhost]

TASK [roles/jumphost_create : create ssh security group] ***********************
ok: [localhost]

TASK [roles/jumphost_create : determine ami image for jumphost_ami_name] *******
ok: [localhost]

TASK [roles/jumphost_create : set_fact] ****************************************
ok: [localhost]

TASK [roles/jumphost_create : start jumphost instance] *************************
ok: [localhost]

TASK [roles/account_roles_create : create support role] ************************
ok: [localhost]

TASK [roles/account_roles_create : create support policy] **********************
ok: [localhost]

TASK [roles/account_roles_create : create installer role] **********************
ok: [localhost]

TASK [roles/account_roles_create : create installer policy] ********************
ok: [localhost]

TASK [roles/account_roles_create : create controlplane role] *******************
ok: [localhost]

TASK [roles/account_roles_create : create controlplane policy] *****************
ok: [localhost]

TASK [roles/account_roles_create : create worker role] *************************
ok: [localhost]

TASK [roles/account_roles_create : create worker policy] ***********************
ok: [localhost]

TASK [roles/cluster_create : what cluster am i creating?] **********************
ok: [localhost] => 
  msg: |-
    ***************************************
    Preparing to create ansible-rosa-v1.
    This task may take up to an hour.
    ***************************************

TASK [roles/cluster_create : figure out list of subnets] ***********************
ok: [localhost]

TASK [roles/cluster_create : set subnet_ids when private-link cluster] *********
ok: [localhost]

TASK [roles/cluster_create : check if cluster exists] **************************
ok: [localhost]

TASK [roles/cluster_create : create cluster] ***********************************
fatal: [localhost]: FAILED! => changed=false 
  cluster:
    additional_trust_bundle: null
    addons: null
    api:
      listening: internal
      url: null
    aws:
      access_key_id: null
      account_id: 066188790342
      audit_log: null
      billing_account_id: null
      ec2_metadata_http_tokens: null
      etcd_encryption:
        kms_key_arn: null
      kms_key_arn: null
      private_link: true
      private_link_configuration: null
      secret_access_key: null
      sts:
        auto_mode: false
        enabled: true
        external_id: null
        instance_iam_roles:
          master_role_arn: arn:aws:iam::066188790342:role/AnsibleROSA-ControlPlane-Role
          worker_role_arn: arn:aws:iam::066188790342:role/AnsibleROSA-Worker-Role
        managed_policies: null
        oidc_config: null
        oidc_endpoint_url: null
        operator_iam_roles:
        - id: null
          name: cloud-credential-operator-iam-ro-creds
          namespace: openshift-cloud-credential-operator
          role_arn: arn:aws:iam::066188790342:role/ansible-rosa-v1-openshift-cloud-credential-operator-cloud-creden
          service_account: null
        - id: null
          name: installer-cloud-credentials
          namespace: openshift-image-registry
          role_arn: arn:aws:iam::066188790342:role/ansible-rosa-v1-openshift-image-registry-installer-cloud-credent
          service_account: null
        - id: null
          name: cloud-credentials
          namespace: openshift-ingress-operator
          role_arn: arn:aws:iam::066188790342:role/ansible-rosa-v1-openshift-ingress-operator-cloud-credentials
          service_account: null
        - id: null
          name: ebs-cloud-credentials
          namespace: openshift-cluster-csi-drivers
          role_arn: arn:aws:iam::066188790342:role/ansible-rosa-v1-openshift-cluster-csi-drivers-ebs-cloud-credenti
          service_account: null
        - id: null
          name: cloud-credentials
          namespace: openshift-cloud-network-config-controller
          role_arn: arn:aws:iam::066188790342:role/ansible-rosa-v1-openshift-cloud-network-config-controller-cloud-
          service_account: null
        - id: null
          name: aws-cloud-credentials
          namespace: openshift-machine-api
          role_arn: arn:aws:iam::066188790342:role/ansible-rosa-v1-openshift-machine-api-aws-cloud-credentials
          service_account: null
        operator_role_prefix: null
        permission_boundary: null
        role_arn: arn:aws:iam::066188790342:role/AnsibleROSA-Installer-Role
        support_role_arn: arn:aws:iam::066188790342:role/AnsibleROSA-Support-Role
      subnet_ids:
      - subnet-085ee901048dbf079
      - subnet-0a6e5b1123448173a
      - subnet-05482346436ff073c
      tags: null
    aws_infrastructure_access_role_grants: null
    billing_model: null
    byo_oidc: null
    ccs:
      disable_scp_checks: null
      enabled: true
      href: null
      id: null
      kind: null
    cloud_provider:
      display_name: null
      href: null
      id: null
      kind: null
      name: aws
    console: null
    creation_timestamp: null
    delete_protection: null
    disable_user_workload_monitoring: null
    dns: null
    etcd_encryption: false
    expiration_timestamp: null
    external_configuration: null
    external_id: null
    fips: null
    flavour:
      aws: null
      gcp: null
      href: null
      id: osd-4
      kind: null
      name: null
      network: null
      nodes: null
    gcp: null
    gcp_encryption_key: null
    gcp_network: null
    groups: null
    health_state: null
    href: null
    htpasswd: null
    hypershift:
      enabled: false
    id: null
    identity_providers: null
    inflight_checks: null
    infra_id: null
    ingresses: null
    kind: null
    load_balancer_quota: null
    machine_pools: null
    managed: null
    managed_service: null
    multi_az: true
    name: ansible-rosa-v1
    network:
      host_prefix: null
      machine_cidr: 10.0.0.0/16
      pod_cidr: null
      service_cidr: null
      type: null
    node_drain_grace_period: null
    node_pools: null
    nodes:
      autoscale_compute: null
      availability_zones:
      - us-east-2b
      - us-east-2c
      - us-east-2a
      compute: 2
      compute_labels: null
      compute_machine_type:
        category: null
        ccs_only: null
        cloud_provider: null
        cpu: null
        generic_name: null
        href: null
        id: m5.xlarge
        kind: null
        memory: null
        name: null
        size: null
      compute_root_volume: null
      infra: null
      infra_machine_type: null
      master: null
      master_machine_type: null
      security_group_filters: null
      total: null
    openshift_version: null
    product:
      href: null
      id: rosa
      kind: null
      name: null
    properties:
      rosa_creator_arn: arn:aws:iam::066188790342:user/vuberti@redhat.com-cv9ss-admin
      rosa_provisioner: ocm-ansible-module
    provision_shard: null
    proxy:
      http_proxy: null
      https_proxy: null
      no_proxy: null
    region:
      ccs_only: null
      cloud_provider: null
      display_name: null
      enabled: null
      href: null
      id: us-east-2
      kind: null
      name: null
      supports_hypershift: null
      supports_multi_az: null
    state: null
    status: null
    storage_quota: null
    subscription: null
    version:
      available_upgrades: null
      channel_group: stable
      default: null
      enabled: null
      end_of_life_timestamp: null
      hosted_control_plane_enabled: null
      href: null
      id: openshift-v4.13.10
      kind: null
      raw_id: null
      release_image: null
      rosa_enabled: null
  msg: |-
    cluster:
    {'kind': None, 'id': None, 'href': None, 'api': {'url': None, 'listening': 'internal'}, 'aws': {'kms_key_arn': None, 'sts': {'oidc_endpoint_url': None, 'auto_mode': False, 'enabled': True, 'external_id': None, 'instance_iam_roles': {'master_role_arn': 'arn:aws:iam::066188790342:role/AnsibleROSA-ControlPlane-Role', 'worker_role_arn': 'arn:aws:iam::066188790342:role/AnsibleROSA-Worker-Role'}, 'managed_policies': None, 'oidc_config': None, 'operator_iam_roles': [{'id': None, 'name': 'cloud-credential-operator-iam-ro-creds', 'namespace': 'openshift-cloud-credential-operator', 'role_arn': 'arn:aws:iam::066188790342:role/ansible-rosa-v1-openshift-cloud-credential-operator-cloud-creden', 'service_account': None}, {'id': None, 'name': 'installer-cloud-credentials', 'namespace': 'openshift-image-registry', 'role_arn': 'arn:aws:iam::066188790342:role/ansible-rosa-v1-openshift-image-registry-installer-cloud-credent', 'service_account': None}, {'id': None, 'name': 'cloud-credentials', 'namespace': 'openshift-ingress-operator', 'role_arn': 'arn:aws:iam::066188790342:role/ansible-rosa-v1-openshift-ingress-operator-cloud-credentials', 'service_account': None}, {'id': None, 'name': 'ebs-cloud-credentials', 'namespace': 'openshift-cluster-csi-drivers', 'role_arn': 'arn:aws:iam::066188790342:role/ansible-rosa-v1-openshift-cluster-csi-drivers-ebs-cloud-credenti', 'service_account': None}, {'id': None, 'name': 'cloud-credentials', 'namespace': 'openshift-cloud-network-config-controller', 'role_arn': 'arn:aws:iam::066188790342:role/ansible-rosa-v1-openshift-cloud-network-config-controller-cloud-', 'service_account': None}, {'id': None, 'name': 'aws-cloud-credentials', 'namespace': 'openshift-machine-api', 'role_arn': 'arn:aws:iam::066188790342:role/ansible-rosa-v1-openshift-machine-api-aws-cloud-credentials', 'service_account': None}], 'operator_role_prefix': None, 'permission_boundary': None, 'role_arn': 'arn:aws:iam::066188790342:role/AnsibleROSA-Installer-Role', 'support_role_arn': 'arn:aws:iam::066188790342:role/AnsibleROSA-Support-Role'}, 'access_key_id': None, 'account_id': '066188790342', 'audit_log': None, 'billing_account_id': None, 'ec2_metadata_http_tokens': None, 'etcd_encryption': {'kms_key_arn': None}, 'private_link': True, 'private_link_configuration': None, 'secret_access_key': None, 'subnet_ids': ['subnet-085ee901048dbf079', 'subnet-0a6e5b1123448173a', 'subnet-05482346436ff073c'], 'tags': None}, 'aws_infrastructure_access_role_grants': None, 'ccs': {'kind': None, 'id': None, 'href': None, 'disable_scp_checks': None, 'enabled': True}, 'dns': None, 'fips': None, 'gcp': None, 'gcp_encryption_key': None, 'gcp_network': None, 'additional_trust_bundle': None, 'addons': None, 'billing_model': None, 'byo_oidc': None, 'cloud_provider': {'kind': None, 'id': None, 'href': None, 'display_name': None, 'name': 'aws'}, 'console': None, 'creation_timestamp': None, 'delete_protection': None, 'disable_user_workload_monitoring': None, 'etcd_encryption': False, 'expiration_timestamp': None, 'external_id': None, 'external_configuration': None, 'flavour': {'kind': None, 'id': 'osd-4', 'href': None, 'aws': None, 'gcp': None, 'name': None, 'network': None, 'nodes': None}, 'groups': None, 'health_state': None, 'htpasswd': None, 'hypershift': {'enabled': False}, 'identity_providers': None, 'inflight_checks': None, 'infra_id': None, 'ingresses': None, 'load_balancer_quota': None, 'machine_pools': None, 'managed': None, 'managed_service': None, 'multi_az': True, 'name': 'ansible-rosa-v1', 'network': {'host_prefix': None, 'machine_cidr': '10.0.0.0/16', 'pod_cidr': None, 'service_cidr': None, 'type': None}, 'node_drain_grace_period': None, 'node_pools': None, 'nodes': {'autoscale_compute': None, 'availability_zones': ['us-east-2b', 'us-east-2c', 'us-east-2a'], 'compute': 2, 'compute_labels': None, 'compute_machine_type': {'kind': None, 'id': 'm5.xlarge', 'href': None, 'ccs_only': None, 'cpu': None, 'category': None, 'cloud_provider': None, 'generic_name': None, 'memory': None, 'name': None, 'size': None}, 'compute_root_volume': None, 'infra': None, 'infra_machine_type': None, 'master': None, 'master_machine_type': None, 'security_group_filters': None, 'total': None}, 'openshift_version': None, 'product': {'kind': None, 'id': 'rosa', 'href': None, 'name': None}, 'properties': {'rosa_creator_arn': 'arn:aws:iam::066188790342:user/vuberti@redhat.com-cv9ss-admin', 'rosa_provisioner': 'ocm-ansible-module'}, 'provision_shard': None, 'proxy': {'http_proxy': None, 'https_proxy': None, 'no_proxy': None}, 'region': {'kind': None, 'id': 'us-east-2', 'href': None, 'ccs_only': None, 'cloud_provider': None, 'display_name': None, 'enabled': None, 'name': None, 'supports_hypershift': None, 'supports_multi_az': None}, 'state': None, 'status': None, 'storage_quota': None, 'subscription': None, 'version': {'kind': None, 'id': 'openshift-v4.13.10', 'href': None, 'rosa_enabled': None, 'available_upgrades': None, 'channel_group': 'stable', 'default': None, 'enabled': None, 'end_of_life_timestamp': None, 'hosted_control_plane_enabled': None, 'raw_id': None, 'release_image': None}}
    Exception when calling DefaultApi->api_clusters_mgmt_v1_clusters_post: (400)
    Reason: Bad Request
    HTTP response headers: HTTPHeaderDict({'content-type': 'application/json', 'x-operation-id': 'f6fade73-04fd-4256-83f4-837f7aabc01f', 'content-length': '312', 'date': 'Fri, 29 Sep 2023 13:32:21 GMT', 'x-envoy-upstream-service-time': '1386', 'server': 'envoy'})
    HTTP response body: {"kind":"Error","id":"400","href":"/api/clusters_mgmt/v1/errors/400","code":"CLUSTERS-MGMT-400","reason":"Invalid number of compute nodes: 2. Multi AZ clusters require at least 3 compute nodes.","details":[{"Error_Key":"InvalidComputeNodesMultiAZCluster"}],"operation_id":"f6fade73-04fd-4256-83f4-837f7aabc01f"}

PLAY RECAP *********************************************************************
localhost                  : ok=42   changed=0    unreachable=0    failed=1    skipped=32   rescued=0    ignored=0   

